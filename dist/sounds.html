<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Sound test</title>
    <script>

// https://www.ibm.com/developerworks/library/wa-ioshtml5/
function onGo () {
    var sounds = [{
        label: "blank",
        from: 0.0,
        to: 5.0
    }, {
        label: "tick",
        from: 5.0,
        to: 6.0
    }, {
        label: "end",
        from: 6.0,
        to: 8.5
    }];
    var audio = new Audio("../src/res/sounds.mp3");
    audio.loop = true;
    audio.addEventListener('timeupdate', function (e) {
        document.getElementById("audioProperties").innerHTML = ["currentTime", "ended"]
            .map(property => property + ": " + audio[property])
            .join(", ");
        sounds.forEach(sound => {
           if (audio.currentTime >= sound.from && audio.currentTime < sound.to) {
               document.getElementById("current").innerHTML = sound.label;
           }
        });
        const sound = sounds[current];
        if (sound) {
            if (audio.currentTime < sound.from) {
                audio.currentTime = sound.from;
                current = -1;
            } else if (audio.currentTime >= sound.to) {
                current = 0;
                audio.currentTime = 0;
            }
        }
    });
    var current = 1;
    audio.play();
}

    </script>
</head>
<body>
    <input type="button" value="Go!" onclick="onGo()">
    <span id="current"></span> : <span id="audioProperties"></span>
</body>
</html>
